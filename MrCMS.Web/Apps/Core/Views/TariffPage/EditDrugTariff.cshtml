@using MrCMS.Helpers
@model MrCMS.Web.Apps.Core.Entities.DrugTariff
@{
    /**/

    ViewBag.Title = "Edit Drug";
}


{
    @if (User.IsInRole("PROVIDER HEAD"))
    { 
    using (Html.BeginForm("EditDrug", "TariffPage", FormMethod.Post, new { id = "drugform" }))
    {
        @Html.HiddenFor(x => x.Id)
        @Html.AntiForgeryToken()
        <div class="modal-header">
            <button aria-label="Close" data-dismiss="modal" class="close" type="button"><span aria-hidden="true">×</span></button>
            <h4 class="modal-title">Edit drug </h4>
        </div>
        <div class="modal-body">
            <div class="form-group">
                @Html.Label("Drug Name")
                @Html.TextBoxFor(x => x.Name, new { @class = "form-control", @placeholder = "Drug Name" })
                @Html.ValidationMessageFor(x => x.Name)

            </div>


            @*<div class="form-group">
                    @Html.Label("Drug Category")
                   @Html.DropDownListFor(x=>x.GroupId,new SelectList(ViewBag.drugGroup, "Id", "Name",Model.GroupId),new { @class = "form-control",@id="groupid"})
                    @Html.ValidationMessageFor(x=>x.Description)

                </div>*@
            <div class="form-group">
                @Html.Label("Drug Description")
                @Html.TextBoxFor(x => x.Description, new { @class = "form-control", @placeholder = "Drug Description" })
                @Html.ValidationMessageFor(x => x.Description)

            </div>


            <div class="form-group">
                @Html.Label("Drug Strength")
                @Html.TextBoxFor(x => x.Strenght, new { @class = "form-control", @placeholder = "Drug Stength" })
                @Html.ValidationMessageFor(x => x.Strenght)

            </div>

            <div class="form-group">
                @Html.Label("Drug Unit")
                @Html.TextBoxFor(x => x.Unit, new { @class = "form-control", @placeholder = "Drug Unit" })
                @Html.ValidationMessageFor(x => x.Unit)

            </div>
            <div class="form-group">
                @Html.Label("Drug Price")
                @Html.TextBox("drugprice", (string)ViewBag.pricestr, new { @class = "form-control", @placeholder = "Drug Price", @type = "number" })
                @Html.ValidationMessageFor(x => x.Price)

            </div>


            <div class="form-group">
                @Html.Label("Preauthorization Required ?")
                @Html.CheckBoxFor(x => x.PreauthorizationRequired, new { @class = "form-control" })
                @Html.ValidationMessageFor(x => x.PreauthorizationRequired)

            </div>

        </div>
        <div class="modal-footer">

            <button data-dismiss="modal" class="btn btn-default pull-left modal-close-btn" type="button">Cancel</button>
            <button class="btn btn-primary" type="button" id="btnSave" onclick="EditDrug()">Save </button>
        </div>

    }



}
else
{

using (Html.BeginForm("EditDrug", "TariffPage", FormMethod.Post, new { @id = "drugform" }))
{
   // @Html.HiddenFor(x => x.Id)
    //Html.AntiForgeryToken()
    //<div class="modal-header">
      //  <button aria-label="Close" data-dismiss="modal" class="close" type="button"><span aria-hidden="true">×</span></button>
        //<h4 class="modal-title">Edit drug </h4>
    //</div>
    <div class="modal-body">
        <div class="form-group">
            @Html.Label("Drug Name")
            @Html.TextBoxFor(x => x.Name, new { @class = "form-control", @placeholder = "Drug Name" })
            @Html.ValidationMessageFor(x => x.Name)

        </div>


        @*<div class="form-group">
                @Html.Label("Drug Category")
               @Html.DropDownListFor(x=>x.GroupId,new SelectList(ViewBag.drugGroup, "Id", "Name",Model.GroupId),new { @class = "form-control",@id="groupid"})
                @Html.ValidationMessageFor(x=>x.Description)

            </div>*@
        <div class="form-group">
            @Html.Label("Drug Description")
            @Html.TextBoxFor(x => x.Description, new { @class = "form-control", @placeholder = "Drug Description" })
            @Html.ValidationMessageFor(x => x.Description)

        </div>


        <div class="form-group">
            @Html.Label("Drug Strength")
            @Html.TextBoxFor(x => x.Strenght, new { @class = "form-control", @placeholder = "Drug Stength" })
            @Html.ValidationMessageFor(x => x.Strenght)

        </div>

        <div class="form-group">
            @Html.Label("Drug Unit")
            @Html.TextBoxFor(x => x.Unit, new { @class = "form-control", @placeholder = "Drug Unit" })
            @Html.ValidationMessageFor(x => x.Unit)

        </div>
        <div class="form-group">
            @Html.Label("Drug Price")
            @Html.TextBox("drugprice", (string)ViewBag.pricestr, new { @class = "form-control", @placeholder = "Drug Price", @type = "number" })
            @Html.ValidationMessageFor(x => x.Price)

        </div>


        <div class="form-group">
            @Html.Label("Preauthorization Required ?")
            @Html.CheckBoxFor(x => x.PreauthorizationRequired, new { @class = "form-control" })
            @Html.ValidationMessageFor(x => x.PreauthorizationRequired)

        </div>

    </div>
    <div class="modal-footer">

        <button data-dismiss="modal" class="btn btn-default pull-left modal-close-btn" type="button">Cancel</button>
        <button class="btn btn-primary" type="button" id="btnSave" onclick="EditDrug()">Save </button>
    </div>

}
}

<script>



    $(function () {

        //Do validation for yourself.
        $('#btnSave').click(function (e) {

            $('#modal-container').modal('hide');

        });


    });


</script>



