@model MrCMS.Web.Apps.Core.Pages.EditClaimsFormPage
@{
    ViewBag.Title = "Edit Claims";
    Layout = "~/Apps/core/views/shared/_BaseLayout.cshtml";
}

@helper Truncate(string input, int length)
{
if (input.Length <= length)
{
        @input
}
else
{
        @input.Substring(0, length)<text>...</text>
}
}

@helper StatusColor(bool input)
{
var response = "";
if (input)
{
    response =
            "success";

}
else
{
    response = "danger";

}
    @response
}

<div class="row">

    <div class="col-md-12 ">
        <div class="callout callout seegreen " style="margin-left: -5px">
            <h4>Tip!</h4>
            <p>Fill the claims form properly before saving.</p>
        </div>


    </div>
</div>
@using (Html.BeginForm("EditClaimForm", "ClaimsPage", FormMethod.Post, new { @id = "ClaimsForm" }))
{
    @ViewBag.TotalCaptured
    <input type="hidden" id="ClaimsID" name="ClaimsID" value="@ViewBag.TotalAmountdigit" />
    <div class="row">
        <div class="col-md-3 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon seegreen"><i class="fa fa-clock-o"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">Claim Batch</span>
                    <span class="info-box-number">@Html.Batchh</span>

                </div>


                <!-- /.info-box-content -->
            </div>

        </div>
        <div class="col-md-3 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-maroon-active"><i class="fa fa-hospital-o"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">Provider Name</span>
                    <span class="info-box-number">@ViewBag.hospital</span>
                </div>
                <!-- /.info-box-content -->
            </div>

        </div>
        <div class="col-md-3 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon seegreen2"><i class="fa fa-file-o"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">Total Encouter Captured</span>
                    <span class="info-box-number">@ViewBag.TotalCaptured</span>
                </div>
                <!-- /.info-box-content -->
            </div>

        </div>
        <div class="col-md-3 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-green"><i class="fa fa-money"></i></span>

                <div class="info-box-content">
                    <span class="info-box-text">Total Amount Captured</span>
                    <span class="info-box-number">@Model.Claimount</span>
                </div>
                <!-- /.info-box-content -->
            </div>
            <!-- /.info-box -->
        </div>

    </div>

    <div class="row">
        <div class="box box " style="overflow:visible">
            <div class="box-header">
                <h3 class="box-title">Enrollee Information</h3>


            </div>
            <div class="box-body">
                <div class="row">
                    <div class="col-xs-3">
                        <label for="FormNo">Claims Form No</label>

                        @Html.TextBox("FormNo", Model.Claim.ClaimsSerialNo, new { @class = "form-control", @placeholder = "Form No" })


                    </div>
                    <div class="col-xs-3">
                        <label for="policynumber">Policy Number</label>
                        @Html.TextBox("policynumber", Model.Claim.enrolleePolicyNumber.Trim(), new { @class = "form-control", @placeholder = "Policy Number" })


                    </div>
                    <div class="col-xs-3">

                        <label for="evscode">EVS Verification Code</label>

                        @ViewBag.Batchh
                    </div>
                    <div class="col-xs-3">

                        <input type="hidden" id="CompanyID" name="CompanyID" value="" />
                        <input type="hidden" id="providerID" name="providerID" value="@ViewBag.MonthYear" />
                        <input type="hidden" id="claimBatchID" name="claimBatchID" value="@ViewBag.hospital" />
                        <input type="hidden" id="enrolleeID" name="enrolleeID" />
                        <label for="treatmentTag">Treatment Tag</label>

                        @ViewBag.TotalCaptured


                    </div>
                </div>
                <div class="row">

                    <div class="col-xs-3">
                        <label for="enrolleename">Name Of Enrollee</label>

                        @ViewBag.TotalAmount

                    </div>
                    <div class="col-xs-3">
                        <label for="providersubcode">Enrollee Company Name</label>

                        @Html.TextBox("FormNo", Model.Claim.ClaimsSerialNo, new { @class = "form-control", @placeholder = "Form No" })

                    </div>

                    <div class="col-xs-3">
                        <label for="providername">Sex</label>
                        @Html.TextBox("policynumber", null, new { @class = "form-control", @placeholder = "Policy Number", @id = "policynumber" })


                    </div>
                </div>


            </div>

            <!-- /.box-body -->
            <div class="overlay hidden" id="enrolleeloadingdisplay">
                <i class="fa fa-refresh fa-spin"></i>


            </div>
        </div>

        <div class="box box seegreen " style="overflow:visible">
            <div class="box-header" style="color: white">
                <h3 class="box-title">Provider Information</h3>

            </div>
            <div class="box-body">

                <div class="row hidden">

                    <div class="col-xs-9">
                        <label for="providercode">Name of Hospital/Clinic</label>

                        @Html.TextBox("evscode", null, new { @class = "form-control", @placeholder = "EVS Verification Code" })

                    </div>


                </div>
                <div class="row">
                    <div class="col-xs-3">
                        <label for="providername">Name of Doctor</label>
                        @ViewBag.ProviderId


                    </div>
                    <div class="col-xs-3">
                        <label for="providersubcode">Area of Specialization</label>

                        @ViewBag.ClaimBatchId

                    </div>
                    <div class="col-xs-3">
                        <label for="providername">ID Number</label>
                        @Html.DropDownList("treatmentTag", new SelectList(ViewBag.treatmentTag, "Id", "Name"), new { @class = "form-control" })


                    </div>
                    <div class="col-xs-3">

                        <div class="form-group">
                            <label for="doctorsigned">Date Signed</label>

                            <div class="input-group">
                                <span class="input-group-addon">
                                    <input type="checkbox" id="doctorsigned" name="doctorsigned" checked="@Html.TextBox("enrolleename", null, new { @class = "form-control", @placeholder = "Enrollee Full Name" })">
                                </span>
                                <input type="text" class="form-control" placeholder="DD/MM/YYYY" id="doctorssigndate" name="doctorssigndate" value="" />
                            </div>
                            <!-- /.input group -->
                        </div>


                    </div>

                </div>
                <div class="row">
                    <div class="col-xs-3">
                        <label for="providername">Name of Specialist</label>
                        @Html.TextBox("enrolleeage", null, new { @class = "form-control", @placeholder = "Age" })


                    </div>

                    <div class="col-xs-3">
                        <label for="providersubcode">Area of Specialization</label>

                        @Html.TextBox("providerename", null, new { @class = "form-control", @placeholder = "Hospital Name" })

                    </div>
                    <div class="col-xs-3">
                        <label for="providercode">Specialist Phone Number</label>

                        @Html.TextBox("doctorname", null, new { @class = "form-control", @placeholder = "Doctors Name" })

                    </div>
                    <div class="col-xs-3">

                        <div class="form-group">
                            <label for="providercode">Date Signed</label>

                            <div class="input-group">
                                <span class="input-group-addon">
                                    <input type="checkbox" id="specialistsigned" name="specialistsigned" checked="@Html.TextBox("areaofspecialization", null, new { @class = "form-control", @placeholder = "Area of Specialization" })">
                                </span>
                                <input type="text" class="form-control" placeholder="DD/MM/YYYY" id="specialistsigndate" name="specialistsigndate" value="@Html.TextBox("Idnumber", null, new { @class = "form-control", @placeholder = "ID Number" })" />
                            </div>
                            <!-- /.input group -->
                        </div>


                    </div>
                </div>

            </div>

            <!-- /.box-body -->
        </div>


        <div class="box box seegreen " style="overflow:visible">
            <div class="box-header" style="color: white">
                <h3 class="box-title">Treatment Details</h3>

            </div>
            <div class="box-body">

                <div class="row">
                    <div class="col-xs-6">
                        <label for="providername">Date of Service</label>
                        @Html.TextBox("specialistname", null, new { @class = "form-control", @placeholder = "Name of Specialist" })


                    </div>
                    <div class="col-xs-6">
                        <label for="providercode">Duration of Treatment</label>

                        @Html.TextBox("areaofspecializationSpecialist", null, new { @class = "form-control", @placeholder = "Area of Specialization" })

                    </div>

                </div>
                <div class="row">
                    <div class="col-xs-6">
                        <label for="providername">Date of Admission</label>
                        @Html.TextBox("specialistphonenumber", null, new { @class = "form-control", @placeholder = "Specialist Phone Number" })


                    </div>
                    <div class="col-xs-6">
                        <label for="providercode">Date Of Discharge</label>
                        @Html.TextBox("dateofservice", null, new { @class = "form-control", @placeholder = "Date of Service" })




                    </div>

                </div>
                <div class="row">
                    <div class="col-xs-6">
                        <label for="diagnosis">Diagnosis</label>

                        @Html.TextBox("durationoftreatment", null, new { @class = "form-control", @placeholder = "Duration of Treatment" })


                    </div>
                    <div class="col-xs-6">

                        <label for="dateofdischarge">Treatment Given</label>

                        @Html.TextBox("dateofadmission", null, new { @class = "form-control", @placeholder = "DD/MM/YYYY" })
                    </div>

                </div>
                <div class="row">
                    <div class="col-xs-6">
                        <label for="treatmentcode">Treatment Code</label>

                        @Html.TextBox("dateofdischarge", null, new { @class = "form-control", @placeholder = "DD/MM/YYYY" })


                    </div>
                    <div class="col-xs-6">

                        <label for="dateofdischarge">Referral Code</label>

                        @Html.TextBox("diagnosis", null, new { @class = "form-control", @placeholder = "Diagnosis" })
                    </div>

                </div>




            </div>

            <!-- /.box-body -->
        </div>
    </div>
    <div class="row">
        <div class="box box " style="overflow:visible">
            <div class="box-header">
                <h3 class="box-title">Service Information</h3>


            </div>
            <div class="box-body ">

                <div class="row ">
                    <div class="col-xs-3">
                        <label for="serviceItemDescription">Item Description</label>
                        <input id='serviceItemDescription' class="form-control" name="serviceItemDescription" />




                        @*@Html.DropDownList("serviceItemDescription", new SelectList(ViewBag.servicetarifflist, "Id", "Name"), new { @class = "form-control" })*@

                    </div>
                    <div class="col-xs-2">
                        <label for="serviceduration">Duration</label>
                        @Html.TextBox("Treatmentgiven", null, new { @class = "form-control", @placeholder = "Treatment Given" })


                    </div>
                    <div class="col-xs-2">

                        <label for="servicerate">Rate</label>

                        @Html.TextBox("treatmentcode", null, new { @class = "form-control", @placeholder = "Treatment Code" })
                    </div>
                    <div class="col-xs-2">
                        <label for="serviceamount">Amount</label>
                        <div class="input-group">

                            <span class="input-group-addon">₦</span>
                            @Html.TextBox("referralcode", null, new { @class = "form-control", @placeholder = "Referral Code" })

                            <input id="servicebill_hiddenID" type="hidden" />
                        </div>




                    </div>

                    <div class="col-xs-2">

                        <p></p>
                        <button type="button" id="addbtn" onclick="DoAddServiceRow();" class="btn bg-olive btn-flat margin"><i class="fa fa-plus" aria-hidden="true"></i> ADD</button>
                    </div>
                </div>
                <div class="row">

                    <table id="servicebilllist" class="table table-striped" width="100%" style="margin-left:5px;">
                        <thead class="seegreen">
                            <tr>
                                <th class="mdl-data-table__cell--non-numeric">Item Description</th>
                                <th class="mdl-data-table__cell--non-numeric">Duration</th>
                                <th class="mdl-data-table__cell--non-numeric">Rate</th>
                                <th class="mdl-data-table__cell--non-numeric">Amount (₦)</th>
                                <th class="mdl-data-table__cell--non-numeric"></th>


                            </tr>
                        </thead>
                        <tbody>

                            <tr class="hidden" id="servicebillRow_0" name="servicebillRow_0">
                                <td>
                                    <input id='serviceEditID' type="hidden" name="serviceEditID" />
                                    <input type="text" class="form-control" value="" readonly="readonly" id="servicebill0ItemDescription" name="servicebill0ItemDescription" style="font-size: 18px; font-weight: bold;" />
                                </td>
                                <td>
                                    <input type="text" class="form-control" value="" readonly="readonly" id="servicebill0Duration" name="servicebill0Duration" style="font-size: 18px; font-weight: bold;" />
                                </td>
                                <td>
                                    <input type="text" class="form-control" value="" readonly="readonly" id="servicebill0Rate" name="servicebill0Rate" style="font-size: 18px; font-weight: bold;" />
                                </td>
                                <td>
                                    <input type="text" class="form-control serviceamount" value="0" readonly="readonly" id="servicebill0amount" name="servicebill0amount" style="font-size: 18px; font-weight: bold;" />
                                    <input type="hidden" id="servicebill0itemID" name="servicebill0itemID" />
                                    <input type="hidden" id="servicebillCount" name="servicebillCount" />
                                </td>
                                <td>
                                    <button type="button" class="btn bg-maroon btn-flat removebtn" onclick="removeRow(this)"><i class="fa fa-trash" aria-hidden="true"></i>Remove</button>
                                    <button type="button" class="btn bg-orange btn-flat editbtn" onclick="editRow2(this)"><i class="fa fa-edit" aria-hidden="true"></i>Edit</button>
                                </td>

                            </tr>

                            @{
                                    <tr name="@Html.TextBox("serviceduration", null, new { @class = "form-control", @placeholder = "Service Duration" })" id="@Html.TextBox("servicerate", null, new { @class = "form-control", @style = "font-size: 18px; font-weight: bold;", @placeholder = "Service Rate" })">
                                        <td>
                                            <input type="text" class="form-control" value="@Html.Textion" readonly="readonly" id="@string.Format("servicebill{0}ItemDescription",servicecount)" name="@string.Format("servicebill{0}ItemDescription",servicecount)" style="font-size: 18px; font-weight: bold;" />
                                        </td>
                                        <td>
                                            <input type="text" class="form-control" value="@item.Duration" readonly="readonly" id="@string.Format("servicebill{0}Duration",servicecount)" name="@string.Format("servicebill{0}Duration",servicecount)" style="font-size: 18px; font-weight: bold;" />
                                        </td>
                                        <td>
                                            <input type="text" class="form-control" value="@item.rate" readonly="readonly" id="@string.Format("servicebill{0}Rate",servicecount)" name="@string.Format("servicebill{0}Rate",servicecount)" style="font-size: 18px; font-weight: bold;" />
                                        </td>
                                        <td>
                                            <input type="text" class="form-control" value="@item.InitialAmount" readonly="readonly" id="@string.Format("servicebill{0}amount",servicecount)" name="@string.Format("servicebill{0}amount",servicecount)" style="font-size: 18px; font-weight: bold;" />
                                            <input type="hidden" value="@item.ServiceId" id="@string.Format("servicebill{0}itemID",servicecount)" name="@string.Format("servicebill{0}itemID",servicecount)" />

                                        </td>
                                        <td>
                                            <button type="button" class="btn bg-maroon btn-flat removebtn" onclick="removeRow(this)"><i class="fa fa-trash" aria-hidden="true"></i>Remove</button>
                                            <button type="button" class="btn bg-orange btn-flat editbtn" onclick="editRow2(this)"><i class="fa fa-edit" aria-hidden="true"></i>Edit</button>
                                        </td>
                                       
                                    </tr>

                                    servicecount++;

                                }



                            }



                        </tbody>

                    </table>
                </div>

           
            </div>

            <!-- /.box-body -->
        </div>

    </div>

    <div class="row">
        <div class="box box " style="overflow:visible">
            <div class="box-header">
                <h3 class="box-title">Drug Information</h3>


            </div>
            <div class="box-body ">

                <div class="row ">
                    <div class="col-xs-3">
                        <label for="drugItemDescription">Item Description</label>
                        @*@Html.DropDownList("drugItemDescription", new SelectList(ViewBag.drugtarifflist, "Id", "Name"), new { @class = "form-control" })*@
                        <input id='drugItemDescription' class="form-control" name="drugItemDescription" />
                        <input id='drugEditID' type="hidden" name="drugEditID" /> 


                    </div>
                    <div class="col-xs-2">
                        <label for="serviceduration">Unit</label>
                        @Html.TextBox("serviceduration", null, new { @class = "form-control", @placeholder = "Service Duration" })


                    </div>
                    <div class="col-xs-2">

                        <label for="servicerate">Rate</label>

                        @Html.TextBox("servicerate", null, new { @class = "form-control", @style = "font-size: 18px; font-weight: bold;", @placeholder = "Service Rate" })
                    </div>
                    <div class="col-xs-2">
                        <label for="serviceamount">Amount</label>
                        <div class="input-group">

                            <span class="input-group-addon">₦</span>
                            @Html.TextBox("drugunit", null, new { @class = "form-control", @placeholder = "Service Duration" })

                            <input id="drugbill_hiddenID" type="hidden" />
                        </div>




                    </div>

                    <div class="col-xs-2">

                        <p></p>
                        <button type="button" id="addbtn" onclick="DoAddDrugRow();" class="btn bg-olive btn-flat margin"><i class="fa fa-plus" aria-hidden="true"></i> ADD</button>
                    </div>
                </div>
                <div class="row">

                    <table id="drugbilllist" class="table table-striped" width="100%" style="margin-left:5px;">
                        <thead class="seegreen">
                            <tr>
                                <th class="mdl-data-table__cell--non-numeric">Item Description</th>
                                <th class="mdl-data-table__cell--non-numeric">Unit</th>
                                <th class="mdl-data-table__cell--non-numeric">Rate</th>
                                <th class="mdl-data-table__cell--non-numeric">Amount (₦)</th>
                                <th class="mdl-data-table__cell--non-numeric"></th>


                            </tr>
                        </thead>
                        <tbody>
                            <tr class="hidden" id="drugbillRow_0" name="drugbillRow_0">
                                <td>
                                    <input type="text" class="form-control" value="" readonly="readonly" id="drugbill0ItemDescription" name="drugbill0ItemDescription" style="font-size: 18px; font-weight: bold;" />
                                </td>
                                <td>
                                    <input type="text" class="form-control" value="" readonly="readonly" id="drugbill0Unit" name="drugbill0Unit" style="font-size: 18px; font-weight: bold;" />
                                </td>
                                <td>
                                    <input type="text" class="form-control" value="" readonly="readonly" id="drugbill0Rate" name="drugbill0Rate" style="font-size: 18px; font-weight: bold;" />
                                </td>
                                <td>
                                    <input type="text" class="form-control drugamount" value="0" readonly="readonly" id="drugbill0amount" name="drugbill0amount" style="font-size: 18px; font-weight: bold;" />
                                    <input type="hidden" id="drugbill0itemID" name="drugbill0itemID" />
                                    <input type="hidden" id="drugbillCount" name="drugbillCount" />
                                </td>
                                <td>
                                    <button type="button" class="btn bg-maroon btn-flat removebtn" onclick="removeRow(this)"><i class="fa fa-trash" aria-hidden="true"></i>Remove</button>
                                    <button type="button" class="btn bg-orange btn-flat editbtn" onclick="editRow(this)"><i class="fa fa-edit" aria-hidden="true"></i>Edit</button>
                                </td>

                            </tr>
                            @{
                                aptureClaimsFormPage - Copy.cshtml"
                                                   }



                            }


                        </tbody>

                    </table>
                </div>
           

            </div>

            <!-- /.box-body -->
        </div>

    </div>
    <div class="row">


        <div class="box box seegreen " style="overflow:visible">
            <div class="box-header" style="color: white">
                <h3 class="box-title">Additional Information</h3>
            </div>
            <div class="box-body">
                <div class="row">
                    <div class="col-xs-3">

                        <div class="form-group">
                            <label for="Enrolleesigned">Date Enrollee Signed</label>

                            <div class="input-group">
                                <span class="input-group-addon">
                                    <input type="checkbox" id="Enrolleesigned" name="Enrolleesigned" checked="@Html.TextBox("drugunit", null, new { @class = "form-control", @placeholder = "Service Duration" })">
                                </span>
                                <input type="text" class="form-control" placeholder="DD/MM//YYYY" id="EnrolleesignedDate" name="EnrolleesignedDate" value="@Html.TextBox("drugrate", null, new { @class = "form-control", @style = "font-size: 18px; font-weight: bold;", @placeholder = "Service Rate" })" />
                            </div>
                            <!-- /.input group -->
                        </div>


                    </div>
                    <div class="col-xs-2">

                        <label for="AllprescibedDrugs">Check for Yes</label>

                        <div class="checkbox">
                            <label>
                                <input type="checkbox" id="AllprescibedDrugs" name="AllprescibedDrugs" checked="@Html.TextBox("drugamount", null, new { @class = "form-control", @style = "font-size: 18px; font-weight: bold;", @placeholder = "Service Amount" })">
                                All Prescribed Drugs
                            </label>
                        </div>
                    </div>

                    <div class="col-xs-2">


                        <label for="LaboratoryInvestigation">Check for Yes</label>
                        <div class="checkbox">

                            <label>
                                <input type="checkbox" id="LaboratoryInvestigation" name="LaboratoryInvestigation" checked="@Url.Action("Add", "ProviderPage",  new { id = -1})">
                                Laboratory Investigation
                            </label>
                        </div>
                    </div>
                    <div class="col-xs-2">


                        <label for="Admission">Check for Yes</label>
                        <div class="checkbox">

                            <label>
                                <input type="checkbox" id="Admission" name="Admission" checked="@Model.Claim.Admission">
                                Admission
                            </label>
                        </div>
                    </div>
                    <div class="col-xs-2">


                        <label for="Feeding">Check for Yes</label>
                        <div class="checkbox">

                            <label>
                                <input type="checkbox" id="Feeding" name="Feeding" checked="@Model.Claim.Feeding">
                                Feeding
                            </label>
                        </div>

                    </div>

                </div>

                <div class="row">
                    <div class="col-xs-6">

                        <div class="form-group">
                            <label>Remark</label>
                            <textarea class="form-control" rows="3" placeholder="Remark ..." id="Remark" name="Remark" >@Model.Claim.Note</textarea>
                        </div>




                    </div>


                </div>
                <div class="row">
                    <div class="col-xs-2">

                        <div class="form-group">
                            <label for="exampleInputFile">Upload File</label>
                            <input id="exampleInputFile" type="file">

                            <p class="help-block">Upload Laboratory result or any relevant document.</p>
                        </div>
                    </div>


                </div>

            </div>

            <!-- /.box-body -->
            <div class="box-footer">
                <button class="btn btn-primary pull-right" type="submit" style="margin-left:4px;">Update</button>

            

            </div>
        </div>
    </div>
                    }
<script>
    $(window).keydown(function (event) {
        if (event.keyCode == 13) {
            event.preventDefault();

            return false;
        }
    });
    $(function () {
        $.datepicker.regional['en'];
        //Date picker
        $('#doctorssigndate').datepicker({
            format: 'dd/mm/yyyy',
            autoclose: true

        });
        $('#specialistsigndate').datepicker({
            format: 'dd/mm/yyyy',
            autoclose: true
        });
        $('#dateofservice').datepicker({
            format: 'dd/mm/yyyy',
            autoclose: true
        });
        $('#EnrolleesignedDate').datepicker({
            format: 'dd/mm/yyyy',
            autoclose: true
        });
        $('#dateofadmission').datepicker({
            format: 'dd/mm/yyyy',
            autoclose: true
        });
        $('#dateofdischarge').datepicker({
            format: 'dd/mm/yyyy',
            autoclose: true
        });


        $('#policynumber').focusout(function() {

            if (true) {

                if ($('#policynumber').val().length > 15){

                    //alert('hello');

                    $.ajax({
                        "type": "GET",
                        "url": '../Enrollee/GetEnrolleeDetailsClaim/?policyNumber=' + $('#policynumber').val(),
                        "data":'' ,
                        beforeSend: function (xhr) {

                            $("#enrolleeloadingdisplay").removeClass("hidden");


                        },
                        "success": function (msg) {

                            if (msg.respCode == 0) {

                                $("#enrolleename").val(msg.EnrolleeName);
                                $("#companyname").val(msg.EnrolleeCompany);
                                $("#enrolleesex").val(msg.EnrolleeGender);
                                $("#enrolleeID").val(msg.Id);
                                $("#CompanyID").val(msg.CompanyId);


                            } else {
                                toastr["error"](msg.errorMsg, "Input Error");
                                $("#enrolleename").val('');
                                $("#companyname").val('');
                                $("#enrolleesex").val('');
                                $("#enrolleeID").val('');
                                $("#CompanyID").val('');
                            }

                            $("#enrolleeloadingdisplay").addClass("hidden");


                        },
                        error: function (xhr, textStatus, error) {
                            if (typeof console == "object") {
                                $("#enrolleeloadingdisplay").addClass("hidden");

                                console.log(xhr.status + "," + xhr.responseText + "," + textStatus + "," + error);
                            }
                        }
                    });
                }

            }
        });
        //$('#serviceItemDescription').editableSelect();
        ResetSelecteable();




        $("#serviceItemDescription").keyup(function () {
            //Clear the selected id
            //alert('hello');
            $('#servicerate').val('');
        });
        $("#drugItemDescription").keyup(function () {
            //Clear the selected id
            //alert('hello');
            $('#drugrate').val('');
        });

        //$('#drugItemDescription').editableSelect();



    });

    function ResetSelecteable() {

        var options2 = {
            url: function (phrase) {
                return "../ClaimsPage/GetServiceTariffJson/?id= + @ViewBag.ProviderId &phrase=" + phrase;
            },



            getValue: "Name",


            list: {
                match: {
                    enabled: true
                },
                onSelectItemEvent: function () {
                    var value = $("#serviceItemDescription").getSelectedItemData().Id;

                    $("#servicebill_hiddenID").val(value).trigger("change");
                    var price = $("#serviceItemDescription").getSelectedItemData().Price;
                    $("#servicerate").val(price);

                }
            },

            theme: "plate-dark"
        };


        var options = {
            url: function (phrase) {
                return "../ClaimsPage/GetDrugTariffJson/?id= + @ViewBag.ProviderId &phrase=" + phrase;
            },



            getValue: "Name",


            list: {
                match: {
                    enabled: true
                },
                onSelectItemEvent: function () {
                    var value = $("#drugItemDescription").getSelectedItemData().Id;

                    $("#drugbill_hiddenID").val(value).trigger("change");
                    var price = $("#drugItemDescription").getSelectedItemData().Price;
                    $("#drugrate").val(price).trigger("change");
                    //alert(price);
                }
            },

            theme: "plate-dark"
        };
        $("#serviceItemDescription").easyAutocomplete(options2);
        $("#drugItemDescription").easyAutocomplete(options);


    }
</script>
